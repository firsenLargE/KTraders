<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Forecasting Dashboard - Kapil Traders</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: #f9fafb; margin: 0; padding: 1rem; }
        h1 { color: #1e40af; margin-bottom: 1rem; }
        .stats { display: flex; gap: 2rem; margin-bottom: 2rem; }
        .stat-card { background: #fff; padding: 1rem; border-radius: 0.5rem; box-shadow: 0 2px 6px rgba(0,0,0,0.1); flex: 1; }
        .stat-title { font-size: 0.9rem; color: #6b7280; }
        .stat-value { font-size: 1.5rem; font-weight: 600; margin-top: 0.5rem; }
        table { width: 100%; border-collapse: collapse; background: #fff; border-radius: 0.5rem; overflow: hidden; }
        th, td { padding: 0.75rem 1rem; text-align: left; border-bottom: 1px solid #e5e7eb; }
        th { background: #f3f4f6; font-weight: 600; }
        .btn { padding: 0.5rem 1rem; border: none; border-radius: 0.375rem; background: #16a34a; color: #fff; cursor: pointer; }
        .btn:hover { background: #15803d; }
        .confidence-high { color: #16a34a; font-weight: 500; }
        .confidence-medium { color: #d97706; font-weight: 500; }
        .confidence-low { color: #dc2626; font-weight: 500; }
        .alert { padding: 0.75rem 1rem; border-radius: 0.375rem; margin-bottom: 1rem; }
        .alert-success { background: #dcfce7; color: #16a34a; }
        .alert-error { background: #fee2e2; color: #dc2626; }
    </style>
</head>
<body>

<h1>ðŸ”® Demand Forecasting Dashboard</h1>

<!-- Success/Error Messages -->
<div th:if="${success}" th:text="${success}" style="color:green; margin-bottom:1rem;"></div>
<div th:if="${error}" th:text="${error}" style="color:red; margin-bottom:1rem;"></div>

<!-- Stats Overview -->
<div>
    <p>Total Forecasts: <span th:text="${#lists.size(forecasts)}">0</span></p>
    <p>High Confidence Forecasts: <span th:text="${highConfidenceCount}">0</span></p>
    <p>Total Predicted Demand: <span th:text="${totalPredictedDemand}">0</span></p>
</div>

<!-- Forecast Table -->
<table border="1" cellspacing="0" cellpadding="5">
    <thead>
        <tr>
            <th>Product</th>
            <th>Forecast Date</th>
            <th>Predicted Demand</th>
            <th>Confidence</th>
            <th>Season</th>
            <th>Recommendation</th>
        </tr>
    </thead>
    <tbody>
        <tr th:each="forecast : ${forecasts}">
            <td th:text="${forecast.product.name}">Product Name</td>
            <td th:text="${forecast.forecastDate}">2025-08-15</td>
            <td th:text="${forecast.predictedDemand}">0</td>
            <td>
<td>
    <span th:if="${forecast.confidencePercentage != null}"
          th:text="${T(String).format('%.1f%%', forecast.confidencePercentage)}">0%</span>
    <span th:unless="${forecast.confidencePercentage != null}">N/A</span>
</td>




            </td>
            <td th:text="${forecast.season}">SUMMER</td>
            <td>
                <span th:if="${forecast.predictedDemand > forecast.product.quantity}" style="color:red; font-weight:bold;">
                    ðŸ“¢ Reorder Needed
                </span>
                <span th:if="${forecast.predictedDemand <= forecast.product.quantity}" style="color:green; font-weight:bold;">
                    âœ… Stock Adequate
                </span>
            </td>
        </tr>
    </tbody>
</table>

<!-- Generate Forecasts Button -->
<form th:action="@{/forecasting/generate}" method="post" style="margin-top:1rem;">
    <button type="submit">ðŸš€ Generate New Forecasts</button>
</form>

</body>


</html>
